import{d as b,u as D,a as E,k,r as d,o as w,j as c,c as m,b as o,l as F,m as p,v as g,f as h,n as _,F as A,i as f}from"./index.5193b7bf.js";import{C as r}from"./js.cookie.dabc28e0.js";import{U as y,g as L,a as U}from"./index.2335fce6.js";const N=o("p",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u767B\u5F55",-1),V={class:"relative my-4"},I={key:0,class:"absolute left-14 top-6 text-red-600 text-sm m-0"},R={class:"my-4"},z=b({__name:"Login",setup(T){const e=D(),s=E();let B=new RegExp("^[a-z0-9-_]{5,15}$");const i=k(()=>B.test(t.value)||t.value==""),t=d(""),a=d("");w(()=>{r.get("login")=="1"&&(e.login=!0,e.userId=r.get("userid")||"\u83B7\u53D6\u6635\u79F0\u5931\u8D25",e.userName=r.get("username")||"\u83B7\u53D6\u6635\u79F0\u5931\u8D25",c.push("/home"))});function v(){s.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4})}async function C(){e.networkLoading=!0;const u=await y(t.value,a.value);u.code==0?(s.clear(),s.success("\u767B\u5F55\u6210\u529F"),e.login=!0,e.userId=t.value,e.userName=u.msg,r.set("login","1",{expires:7}),r.set("userid",t.value),r.set("username",u.msg),r.set("token",L(30),{expires:7}),c.push("/home")):(u.code=2)?s.warning(u.msg):(u.code=3)&&s.error(u.msg),e.networkLoading=!1}async function x(){if(t.value=="")return s.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(!i.value)return s.warning("\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"),s.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4}),0;e.networkLoading=!0;const u=await U(t.value,t.value,a.value);u.code==0?s.success(u.msg):(u.code=3)&&s.error(u.msg),e.networkLoading=!1}return(u,n)=>(f(),m(A,null,[N,o("p",V,[F("\u8D26\u53F7\uFF1A "),p(o("input",{class:"border px-1 rounded-md",type:"text",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7","onUpdate:modelValue":n[0]||(n[0]=l=>t.value=l),onFocusin:v},null,544),[[g,t.value]]),h(i)?_("",!0):(f(),m("span",I,"\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"))]),o("p",R,[F("\u5BC6\u7801\uFF1A "),p(o("input",{class:"border px-1 rounded-md",type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","onUpdate:modelValue":n[1]||(n[1]=l=>a.value=l)},null,512),[[g,a.value]])]),o("div",{class:"button-group mt-6 flex justify-center"},[o("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:C},"\u767B\u5F55"),o("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:x},"\u6CE8\u518C")])],64))}});export{z as default};
