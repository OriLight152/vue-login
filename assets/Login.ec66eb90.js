import{d as C,u as b,a as E,l as w,r as c,c as d,b as t,m as p,n as F,v as m,f as k,p as D,F as h,j as n,k as _,i as g}from"./index.7f30e5e7.js";import{U as A,g as y,a as L}from"./index.68bb0acf.js";const U=t("p",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u767B\u5F55",-1),V={class:"relative my-4"},N={key:0,class:"absolute left-14 top-6 text-red-600 text-sm m-0"},R={class:"my-4"},S=C({__name:"Login",setup(T){const o=b(),u=E();let f=new RegExp("^[a-z0-9-_]{5,15}$");const i=w(()=>f.test(s.value)||s.value==""),s=c(""),r=c("");function v(){u.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4})}async function B(){o.networkLoading=!0;const e=await A(s.value,r.value);e.code==0?(u.clear(),u.success("\u767B\u5F55\u6210\u529F"),o.login=!0,o.userId=s.value,o.userName=e.msg,n.set("login","1",{expires:7}),n.set("userid",s.value,{expires:7}),n.set("username",e.msg,{expires:7}),n.set("token",y(30),{expires:7}),_.push("/home")):(e.code=2)?u.warning(e.msg):(e.code=3)&&u.error(e.msg),o.networkLoading=!1}async function x(){if(s.value=="")return u.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(!i.value)return u.warning("\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"),u.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4}),0;o.networkLoading=!0;const e=await L(s.value,s.value,r.value);e.code==0?u.success(e.msg):(e.code=3)&&u.error(e.msg),o.networkLoading=!1}return(e,a)=>(g(),d(h,null,[U,t("p",V,[p("\u8D26\u53F7\uFF1A "),F(t("input",{class:"border px-1 rounded-md",type:"text",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7","onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),onFocusin:v},null,544),[[m,s.value]]),k(i)?D("",!0):(g(),d("span",N,"\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"))]),t("p",R,[p("\u5BC6\u7801\uFF1A "),F(t("input",{class:"border px-1 rounded-md",type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","onUpdate:modelValue":a[1]||(a[1]=l=>r.value=l)},null,512),[[m,r.value]])]),t("div",{class:"button-group mt-6 flex justify-center"},[t("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:B},"\u767B\u5F55"),t("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:x},"\u6CE8\u518C")])],64))}});export{S as default};
