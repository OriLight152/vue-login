import{d as x,u as b,a as E,l as w,r as c,c as d,b as t,m as F,n as m,v as p,f as k,p as D,F as h,j as n,k as _,i as g}from"./index.e53d3f9c.js";import{U as A,g as y,a as L}from"./index.2335fce6.js";const U=t("p",{class:"text-center font-semibold text-xl mb-6"},"\u7528\u6237\u767B\u5F55",-1),V={class:"relative my-4"},N={key:0,class:"absolute left-14 top-6 text-red-600 text-sm m-0"},R={class:"my-4"},S=x({__name:"Login",setup(T){const o=b(),e=E();let f=new RegExp("^[a-z0-9-_]{5,15}$");const i=w(()=>f.test(s.value)||s.value==""),s=c(""),r=c("");function v(){e.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4})}async function B(){o.networkLoading=!0;const u=await A(s.value,r.value);u.code==0?(e.clear(),e.success("\u767B\u5F55\u6210\u529F"),o.login=!0,o.userId=s.value,o.userName=u.msg,n.set("login","1",{expires:7}),n.set("userid",s.value),n.set("username",u.msg),n.set("token",y(30),{expires:7}),_.push("/home")):(u.code=2)?e.warning(u.msg):(u.code=3)&&e.error(u.msg),o.networkLoading=!1}async function C(){if(s.value=="")return e.warning("\u8D26\u53F7\u4E0D\u53EF\u4E3A\u7A7A"),0;if(!i.value)return e.warning("\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"),e.info("\u7528\u6237\u540D\u4EC5\u652F\u6301\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u6A2A\u6760\u3001\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u957F\u5EA65-15\u5B57\u7B26",{timeout:1e4}),0;o.networkLoading=!0;const u=await L(s.value,s.value,r.value);u.code==0?e.success(u.msg):(u.code=3)&&e.error(u.msg),o.networkLoading=!1}return(u,a)=>(g(),d(h,null,[U,t("p",V,[F("\u8D26\u53F7\uFF1A "),m(t("input",{class:"border px-1 rounded-md",type:"text",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7","onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),onFocusin:v},null,544),[[p,s.value]]),k(i)?D("",!0):(g(),d("span",N,"\u5F53\u524D\u8D26\u53F7\u683C\u5F0F\u975E\u6CD5"))]),t("p",R,[F("\u5BC6\u7801\uFF1A "),m(t("input",{class:"border px-1 rounded-md",type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","onUpdate:modelValue":a[1]||(a[1]=l=>r.value=l)},null,512),[[p,r.value]])]),t("div",{class:"button-group mt-6 flex justify-center"},[t("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:B},"\u767B\u5F55"),t("button",{class:"transition-colors px-4 py-1 mr-2 border-black border rounded-lg hover:bg-black hover:text-white",onClick:C},"\u6CE8\u518C")])],64))}});export{S as default};
